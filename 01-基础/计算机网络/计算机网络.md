# 计算机网络

## OSI参考模型

| 层次       | 协议              | 传输数据   | 功能                                                 |
| ---------- | ----------------- | ---------- | ---------------------------------------------------- |
| 应用层     | HTTP、FTP、SMTP等 | 报文       | 网络的顶层实现                                       |
| 表示层     | \                 | 表示出报文 | 数据传输之前，实现数据的加密、压缩和转换。           |
| 会话层     | \                 | 会话层报文 | 负责建立、管理和终止会话。                           |
| 传输层     | TCP、UDP          | 段         | 提供端到端的通信控制，确保数据的正确性和有效性。     |
| 网络层     | IP、ICMP          | 包         | 负责数据包从源到目的地的路由和转发。                 |
| 数据链路层 | ARP、IEEE 802.11  | 帧         | 在相邻节点之间的可靠传输，处理错误检测和修正。       |
| 物理层     | \                 | 比特流     | 传输原始比特流，涉及电气特性、机械特性、功能特性等。 |

## 五层参考模型

| 层次       | 协议              | 传输数据 | 功能                                                                                 |
| ---------- | ----------------- | -------- | ------------------------------------------------------------------------------------ |
| 应用层     | HTTP、FTP、SMTP等 | 报文     | 为应用程序提供网络服务，处理特定的应用程序细节。                                     |
| 传输层     | TCP、UDP          | 段       | 提供端到端的通信服务，确保数据的正确性和有效性，<br />包括流量控制、错误检测和纠正。 |
| 网络层     | IP、ICMP          | 包       | 负责数据包从源到目的地的路由和转发，实现不同网络之间的通信。                         |
| 数据链路层 | ARP、IEEE 802.11  | 帧       | 在相邻节点之间的可靠传输，处理错误检测和修正，以及帧的传输。                         |
| 物理层     |                   | 比特流   | 在相邻节点之间的可靠传输，处理错误检测和修正，以及帧的传输。                         |

## TCP/UDP区别

### 连接性

- TCP是面向连接的。每次传输数据之前需要先建立连接，在传输完数据之后需要关闭连接。建立连接的过程称为 `三次握手`。

  - 客户端向服务端发送连接建立请求SYN，同时给出客户端的初始序列号。
  - 服务端收到客户端给出的连接建立请求之后，如果此时可以建立连接，则回复SYN-ACK，并给出服务端的序列号。
  - 客户端收到服务端的SYN-ACK之后，回复改请求的ACK，并将初始服务端序号+1，表示收到改数据并成功处理。

  在断开连接时，需要服务端与客户端之间相互确认，这个过程称为 `四次挥手`

  - 客户端在完成数据传输之后，会向服务端发送一个包含FIN位的结束段。
  - 服务端收到FIN报文段之后，会将客户端报文序号+1给出ACK报文。此时，客户端-服务端的连接关闭，但是服务端 - 客户端的连接依然存在，即服务端可以继续向客户端发送数据。这时候的连接称为半关状态。
  - 当服务端完成数据传输之后，会向客户端发送一个包含FIN位的报文段。
  - 客户端收到服务端的FIN报文段之后，将服务端报文序号+1并发送ACK报文。此时服务端 - 客户端的连接被关闭，TCP连接关闭。
- UDP是无连接的，在发送数据之前不需要建立连接。每次发送数据时，只需要将数据包发送到对方即可，不需要关注是否发送成功。

### 可靠性

- TCP提供可靠的服务。它通过序列号、确认应答、重传机制、流量控制和拥塞控制等机制确保数据包的可靠传输。
- UDP提供不可靠的服务。它不保证数据包的顺序、完整性或可靠性，也不会进行重传。如果需要可靠性，应用程序需要在UDP的基础上自己实现。

### 传输速度

- TCP是面向连接的，每次传输数据之前需要对连接信息做检查，因此速度较慢。
- UDP不需要面向连接保证可靠传输，因此传输速度较快。

### 错误检查

- TCP使用校验和来检查数据在传输过程中的完整性，如果发现错误，TCP会重新传输损坏的数据包。
- UDP也使用校验和来检查数据的完整性，但如果发现错误，UDP会简单地将损坏的数据包丢弃，不会进行重传。

### 流量控制

- TCP具有流量控制机制，通过滑动窗口算法来控制数据的传输速率，以避免网络拥塞。
- UDP没有流量控制机制，应用程序必须自己控制发送速率，以避免发送过快导致网络拥塞。