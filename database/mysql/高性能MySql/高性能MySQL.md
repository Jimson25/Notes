### 一、MySQL逻辑架构

#### 1.2 并发控制

##### 1.2.1 读写锁

- 读锁：读锁是共享的，或者说是互相不阻塞的。多个客户可以在同一时刻读取同一个资源而互不干扰。
- 写锁：写锁是排他的，即一个写锁会阻塞其他的写锁或读锁。这种安全策略是为了保证在给定时间内只有一个用户能访问数据资源，即只有一个用户能执行写入，并防止其他用户读取正在写入的内容。

##### 1.2.2 锁粒度

- 对于提高资源共享的方式中，最理想的方式是只锁住我们正在修改的数据片，即锁的粒度越小越好。但是随之而来的问题是对于锁的各种操作如获取锁、检查锁是否释放以及释放锁等，这些操作都会增大系统开销。如果系统花费大量的时间去管理锁而不是存取数据，那么系统的性能也会因此而受到影响。
- 锁策略：锁策略根本上来讲就是在锁粒度和数据安全上找到平衡。
- 表锁：表锁是一种开销最小的策略，它会锁定整张表（同时会导致并发性能降低）。一个用户在对表进行写操作前，需要先获取写锁，这会阻塞其他用户对该表的读写操作。只有没有写锁时其他用户才能获取读锁，读锁之间是互相不阻塞的。写锁具有比读锁更高的优先级，在某些情况下，写锁会被插入到读锁前面，即在等待队列中会先执行写锁在执行读锁。***读锁不能插入到写锁之前***。
- 行级锁：行级锁会带来巨大的性能开销，但是它支持更大的并发。