## 垃圾收集器

### 一、 评估GC的性能指标
1. 吞吐量：运行用户代码时间占总运行时间的比例。
    - 吞吐量就是`CPU用于执行用户代码的时间 `与` CPU总消耗时间`的比值。即吞吐量 = 运行用户代码时间 / (运行用户代码时间 + 垃圾收集时间)。如程序总共运行了100分钟，其中垃圾收集消耗了1分钟，那么吞吐量就是99%

    - 吞吐量优先意味着程序能容忍较高的暂停时间，因此，高吞吐量的程序有更长的时间基准，快速响应是不必要考虑的。![吞吐量优先](./img/吞吐量优先.jpg)

2. 垃圾收集开销： 吞吐量的补数，垃圾收集时间占总运行时间的比例。

3. 暂停时间：执行垃圾收集时，程序的工作线程被暂停的时间。
    - 暂停时间是指一个时间段内应用程序暂停，让GC线程执行的状态。在暂停时间内是没有应用程序执行的。

    - 暂停时间优先意味着尽可能的让每次STW的时间最短。![暂停时间优先](./img/暂停时间优先.jpg) 

4. 收集频率：相对于应用程序的执行，收集操作发生的频率。

5. 内存占用：java堆区所占用的内存大小。

- 上面5项中，`吞吐量`、`暂停时间`、`内存占用`三者最多只能同时满足两项。

### 二、java中的垃圾收集器

1. 目前java中有7款主流的垃圾收集器如下：
    - 串行回收器：Serial 、 Serial Old
    - 并行回收器：ParNew 、 Parallel Scavenge 、Parallel Old
    - 并发回收器：CMS 、 G1